<!DOCTYPE html>
<html lang="en">

<head>
    <title>Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        // javascript for checkbox
        function displayCheckbox() {
            // Get all checkboxes
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');

            // Check if any checkbox is checked
            var checkedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;

            // Get the button
            var button = document.getElementById('bookButton');

            // Enable or disable the button based on whether any checkbox is checked
            button.disabled = checkedCount === 0 || checkedCount > 2;
        }

        function displayAlert() { // This function is called when the button is clicked
            // Get all checkboxes
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            // Check if any checkbox is checked
            var checkedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
            // Get current total from localStorage and convert it to a number
            var totalChecked = Number(localStorage.getItem("checked")) || 0;
            // Add checkedCount to the total
            totalChecked += checkedCount;

            // Store the new total in localStorage
            localStorage.setItem("checked", totalChecked);
            // Log the new total to the console
            console.log(localStorage.getItem("checked"));
            // Display the total on the webpage
            var displayElement = document.getElementById("display");
            displayElement.textContent = "Total number of bookings: " + totalChecked;

            alert("Room booked!");
            // To get the timeslots of the checked ones, you could add additional code here

            // To send some data to the server to tell that the room is booked even if the page is refreshed, you could use AJAX or Fetch API
        }

        // javascript for tabbar
        function OpenDay(evt, day) {
            var i, tabcontent, tablinks;

            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            document.getElementById(day).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>
</head>

<body>
    <ul class="navbar">
        <li><a href="{{ url_for('home') }}">Home</a></li>
        <li><a class="active" href="{{ url_for('booking') }}">Book Room</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="{{ url_for('information') }}">Information</a></li>
    </ul>
    <h1>Room Booking</h1>
    <button class="BookButton" type="button" id="bookButton" disabled onclick="displayAlert()">BOOK</button>
    <!-- Disable the button by default -->

    <!--Create links to change the page in the tab bar-->
    <div class="tab">
        <button class="tablinks" onclick="OpenDay(event, 'Monday')">Mon</button>
        <button class="tablinks" onclick="OpenDay(event, 'Tuesday')">Tue</button>
        <button class="tablinks" onclick="OpenDay(event, 'Wednesday')">Wed</button>
        <button class="tablinks" onclick="OpenDay(event, 'Thursday')">Thu</button>
        <button class="tablinks" onclick="OpenDay(event, 'Friday')">Fri</button>
    </div>

    <!--The content of the tabs-->
    <div id="Monday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td><input type="checkbox" id="randomCheckbox" onclick="displayCheckbox()">
                    <!-- Checkbox to enable the button --></td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td><input type="checkbox" data-timeslot="2023-11-13T08:00" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td><input type="checkbox" onclick="displayCheckbox()"></td>
            </tr>
        </table>
    </div>

    <div id="Tuesday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Wednesday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Thursday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Friday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>
    <div id="display"></div>
</body>

</html>